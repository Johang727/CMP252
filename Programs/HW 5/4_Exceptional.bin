; Johang Hernandez
; Module 5 Assignment - Exceptional

; For an exceptional assessment, further modify the program so that when a lower case
; character is entered, the same letter in capital form is output.
;
;	High Level Algorithm:
;
;	total = 0
;
;	do
;		Get input
;		Put input into variable char
;		if char >= 97 (x61) && char <= 122 (x7A): // is lowercase
;			print(char.upper())
;		else:
;			print(char) // the reason I didn't put this below is because this would not print out numbers
;			or another non-alphabet characters
;		if char >= 65 (x41) && char <= 90 (x5A): // is uppercase
;			total += 1
;	while char != "*" // 42 | x2A

;	------------------------
;
;	Machine Level Algorithm:

;	Start at x3000

;	Initialize R2 to 0 (R2 is the # of characters that are uppercase)
;	
;	loop:
;		Use TRAP x23 to put an ASCII Char in R0

;		// check if lower-case
;		Init. R1 to 0 (R1 is temporary character storage)
;		ADD R0 to R1
;		ADD -97 to R1 			// if a, then = 0 || if A, -32 || if {, then 26
;		if z || p, 
;			branch to printing script
;		else
;			print char [R0] as is


;		Initialize R1 to 0 
;		ADD R0 to R1 
;		ADD -65 to R1 			// if A, then = 0 || if a, then 32
;		If z || p, 
;			branch to counter script


;		ADD -42 from R0
;		If n || p, continue (return to start)

;		HALT

;		// counter script 
;		ADD -26 to R1 			// if A, then -26 || if a, then 6 || if Z, then -1
;		if z || p, branch to loop
;		ADD 1 to R2
;		if nzp,
;			continue (return to start)

;		// printing script
;		ADD -26 to R1 // if a, then -26 || if {, then 0 || if z, then -1
;		if z || p, 
;			continue (return to start)
;		
;		// this is a lowercase character print out the uppercase one

;		ADD -32 to R0
;		Use TRAP x21 to print out the uppercase ASCII Char
;		if nzp,
;			continue (return to start)






; -----
; Start of Script

; place program in x3000
0011 0000 0000 0000

; initialize capital letter counter (R2)
0101 010 010 1 00000		; x3000

; -----
; Start of Loop

; get character from user | will be placed in input (R0)
1111 0000 0010 0011			; x3001

; check if lowercase (if character is greater than or equal to 97 [a] and less than or equal to 122 [z]) 
	; set working variable char (R1) to input (R0)
	0101 001 001 1 00000		; x3002		set R1 to 0
	0001 001 000 000 001		; x3003		add R0 to R1

	; check if char is greater than or equal to [a]
	0001 001 001 1 10000		; x3004		Subtract 97 from R1
	0001 001 001 1 10000		; x3005		|
	0001 001 001 1 10000		; x3006		|
	0001 001 001 1 10000		; x3007		|
	0001 001 001 1 10000		; x3008		|
	0001 001 001 1 10000		; x3009		|
	0001 001 001 1 11111		; x300A		v
	; jump to [Print Capitals Branch] (x301A) if so
	0000 0 1 1 000001110		; x300B

; print character if not lowercase | the "else" case
	1111 0000 0010 0001			; x300C

; check if uppercase (if character is greater than or equal to 65 [A])
	; set working variable char (R1) to input (R0)
	0101 001 001 1 00000		; x300D
	0001 001 000 000 001		; x300E

	; check if char is greater than or equal to [A]
	0001 001 001 1 10000		; x300F		Subtract 65 from R1
	0001 001 001 1 10000		; x3010		|
	0001 001 001 1 10000		; x3011		|
	0001 001 001 1 10000		; x3012		|
	0001 001 001 1 11111		; x3013		v
	; jump to [Inc Uppercase Counter Branch] if so
	0000 0 1 1 000001100		; x3014

; Check if exit character [*] (if character equals 42)
	0001 000 000 1 10000		; x3015		Subtract 42 from R0
	0001 000 000 1 10000		; x3016		|
	0001 000 000 1 10110		; x3017		v
	; if not exit character [*], continue with loop
	0000 1 0 1 111101000		; x3018

; Halt program because exit character [*] was entered.
1111 0000 0010 0101			; x3019		HALT PROGRAM

; -----
; Print Capitals Branch

; check if char is less than or equal to [z]
	0001 001 001 1 10000		; x301A		SUB 26 from R1
	0001 001 001 1 10110		; x301B		v

	; continue, go back to start if > [z]
	0000 0 1 1 111101111		; x301C

; convert character in input (R0) to uppercase
0001 000 000 1 10000		; x301D		SUB 32 from R0
0001 000 000 1 10000		; x301E		v

; print the uppercase character from the input (R0)
1111 0000 0010 0001			; x301F

; continue, go back to start of loop
0000 1 1 1 111100000		; x3020

; -----
; Inc Uppercase Counter Branch

; check if char is less than or equal to [Z]
	0001 001 001 1 10000		; x3021		Subtract 26 from R1
	0001 001 001 1 10110		; x3022		v

	; continue, go back to start of loop if not within bounds (char > [Z], therefore no longer part of the uppercase set)
	0000 0 1 1 111011101		; x3023

; increment counter (R2) by 1
0001 010 010 1 00001		; x3024

; continue, go back to start of loop
0000 1 1 1 111011011		; x3025